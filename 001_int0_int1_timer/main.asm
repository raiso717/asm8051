	COUNT1 REG 01
	COUNT2 REG 02
	COUNT3 REG 03
	ORG 0H
	AJMP MAIN
	ORG 03H
	JMP INIT0
	ORG 13H
	JMP INIT1
;-----------------------------------
MAIN:
	MOV	IE,#10000101B
	MOV A,#11111110B
LOOP
	MOV P1,A
	ACALL DELAY1
	RL A
	AJMP LOOP

;-----------------------------------
INIT0:
	PUSH A
	PUSH COUNT3
	MOV R0,#11110000B
	MOV COUNT2,#02
C0
	MOV COUNT1,#02
A0
	MOV P1,R0
	CALL DELAY1
	MOV P1,#FFH
	CALL DELAY1
	DJNZ COUNT1,A0
	CALL DELAY1

	MOV A,R0
	SWAP A
	MOV R0,A
	DJNZ COUNT2,C0
	POP COUNT3
	POP A
	RETI

;-----------------------------------
INIT1:
	PUSH A
	PUSH COUNT3
	MOV R0,#11110000B
	MOV COUNT2,#02
C1
	MOV COUNT1,#03
A1
	MOV P1,R0
	CALL DELAY1
	MOV P1,#FFH
	CALL DELAY1
	DJNZ COUNT1,A1
	CALL DELAY1

	MOV A,R0
	SWAP A
	MOV R0,A
	DJNZ COUNT2,C1
	POP COUNT3
	POP A
	RETI


;-----------------------------------
DELAY1:
	MOV COUNT3,#5
	MOV TMOD,#00000001B
TIMER
	MOV TH0,#3CH
	MOV TL0,#B0H
	SETB TR0
WAIT 
	JB TF0,OK
	AJMP WAIT
OK
	CLR TF0
	DJNZ COUNT3,TIMER
	RET

;-----------------------------------
